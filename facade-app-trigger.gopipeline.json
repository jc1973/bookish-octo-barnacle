{
  "name": "facade-trigger",
  "environment_variables": [],
  "group" : "application-triggers",
  "materials": [
    {
      "url": "git@github.com:JSainsburyPLC/id-facade.git",
      "type": "git",
      "branch": "SID-94"
    }
  ],
  "stages": [
    {
      "name": "git-commit",
      "fetch_materials": true,
      "never_cleanup_artifacts": false,
      "clean_working_directory": false,
      "environment_variables": [],
      "jobs": [
        {
          "name": "random-commits",
          "environment_variables": [],
          "tabs": [],
          "resources": [],
          "artifacts": [],
          "properties": [],
          "run_instance_count": null,
          "timeout": 0,
          "tasks": [
            {
              "type": "exec",
              "run_if": "passed",
              "on_cancel" : null,
              "command": "/bin/echo",
              "arguments": [ "'commit detected'"],
              "working_directory": null
            }
          ]
        }
      ]
    },
    {
      "name": "wheres-home",
      "fetch_materials": true,
      "never_cleanup_artifacts": false,
      "clean_working_directory": false,
      "environment_variables": [],
      "jobs": [
        {
          "name": "wheres-home",
          "environment_variables": [],
          "tabs": [],
          "resources": [],
          "artifacts": [],
          "properties": [],
          "run_instance_count": null,
          "timeout": 0,
          "tasks": [
            {
              "type": "exec",
              "run_if": "passed",
              "on_cancel" : null,
              "command": "/bin/echo",
              "arguments": [  "${GO_REVISION}" ],
              "working_directory": null
            }
          ]
        }
      ]
    },

    {
      "name": "script-databag-gocd-orchestrate",
      "never_cleanup_artifacts": true,
      "clean_working_directory": false,
      "environment_variables": [],
      "jobs": [
        {
          "name": "script-databag",
          "environment_variables": [],
          "tabs": [],
          "resources": [],
          "artifacts": [],
          "properties": [],
          "run_instance_count": null,
          "timeout": 0,
          "tasks": [
            {
              "type": "exec",
              "run_if": "passed",
              "on_cancel" : null,
              "command": "gocd-orchestrate-databg.rb",
              "arguments": [ "-E", "dev", "-g", "'git@github.com:JSainsburyPLC/id-facade.git'" ],
              "working_directory": null
            }
          ]
        }
      ]
    },
    {
      "name": "gocd-orchestrate-databag-update",
      "never_cleanup_artifacts": false,
      "clean_working_directory": false,
      "environment_variables": [],
      "jobs": [
        {
          "name": "update-databag",
          "environment_variables": [],
          "tabs": [],
          "resources": [],
          "artifacts": [],
          "properties": [],
          "run_instance_count": null,
          "timeout": 0,
          "tasks": [
            {
              "type": "exec",
              "run_if": "passed",
              "on_cancel" : null,
              "command": "gocd-orchestrate-databg.rb",
              "arguments": [ "\" -E dev -g 'git@github.com:JSainsburyPLC/id-facade.git' -a  commit:5573ede4e2265aa1d4a56edab99e8fda9081c745,go-changed-this:true\"" ],
              "working_directory": null
            }
          ]
        }
      ]
    }

  ]
}
